//==============================================================================
// ファイル名: test-operators.kir
//==============================================================================
// 【目的】
// 全ての演算子（算術、ビット、シフト、単項、複合代入）が正しく動作することを確認
//
// 【解説】
// - データセクション初期化
// - 二項演算: +, -, *, /s, %s, &, |, ^, <<, >>s
// - 単項演算: -, ~
// - 複合代入: +=, *=
// - 各演算の結果を次の演算で使用し、最終的に単一の値に集約
//
// 【期待される結果】
// Exit code: 31
//==============================================================================

[data + 0] = 100
[data + 8] = 30
[data + 16] = 7
[data + 24] = 3
[data + 32] = 2

// 加算: 100 + 30 = 130
s[0] = d[0] + d[8]

// 減算: 130 - 30 = 100
s[0] = s[0] - d[8]

// 乗算: 100 * 2 = 200
s[0] = s[0] * d[32]

// 符号付き除算: 200 / 7 = 28
s[0] = s[0] /s d[16]

// 剰余: 28 % 7 = 0
s[8] = s[0] %s d[16]

// AND: 28 & 7 = 4
s[16] = s[0] & d[16]

// OR: 4 | 3 = 7
s[16] = s[16] | d[24]

// XOR: 7 ^ 3 = 4
s[16] = s[16] ^ d[24]

// 左シフト: 4 << 2 = 16
s[16] = s[16] << d[32]

// 算術右シフト: 16 >> 2 = 4
s[16] = s[16] >>s d[32]

// NOT: ~4 = -5 (2の補数)
s[24] = ~s[16]

// 符号反転: -(-5) = 5
s[24] = -s[24]

// 複合代入テスト
s[32] = 10
s[32] += d[24]  // 10 + 3 = 13
s[32] *= d[32]  // 13 * 2 = 26

// 最終結果: 5 + 26 = 31
s[0] = s[24] + s[32]

syscall ExitProcess, s[0]

goto END
